# HYPER-TENSOR PROTOCOL (HTP): Technical Specification

"Time is Evolution, Space is Projection, Context is Gravity."

## 1. Mathematical Preliminaries

### 1.1 Contextual Universe Generation (The Physical Binding)

To ensure that any generated proof is intrinsically bound to the specific problem instance, we define the Contextual Binding Principle.

**Discriminant Generation:**
The physical constants of the algebraic universe are not chosen arbitrarily; they are derived deterministically from the user's intent.

$$\Delta = -M$$

where $M$ is a large prime number satisfying $M \equiv 3 \pmod 4$, derived via:

$$M = \text{NextPrime}(\text{SHA256}(\text{ContextString}))$$

**Implication:**

* **Unique Universe:** Every distinct logical problem (Context) spawns a unique Ideal Class Group $Cl(\Delta)$.
* **Topology Shift:** Changing a single word in the prompt changes $\Delta$, which completely reshuffles the Cayley Graph structure, edge weights, and cycle properties.
* **Anti-Replay:** A path valid in the "Even Sum Universe" is topologically nonexistent or invalid in the "Odd Sum Universe".

### 1.2 Algebraic Dynamics (Dynamical Decoupling)

To reconcile the requirement for local search (Optimization) with the requirement for sequential hardness (Security), the protocol explicitly decouples the Search Dynamics from the Observation Dynamics.

**1. Search Dynamics (The Will's Walk):**
The Optimizer (Will) operates on the Cayley Graph without time-evolution to preserve the Lipschitz metric structure required for convergence.

$$S_{k+1} = S_k \circ \epsilon_k$$

Here, $S$ represents the "Seed of the Moment". The search moves to adjacent nodes to minimize the potential energy of the entire future path generated by this seed.

**2. Observation Dynamics (The Arrow of Time):**
To materialize a logical path from a candidate seed $S$, we apply the VDF (Squaring) to generate a temporal sequence (Orbit), and observe it through a Time-Dependent Rotating Projection.

$$\mathcal{O}(S) = [ S_0, S_1, \dots, S_T ]$$

where

$$S_{t+1} = S_t^2$$

The logical projection $\Psi$ is now parameterized by time $t$, creating a dynamic affine map:

$$\text{Path} = [ \Psi(S_0, 0), \Psi(S_1, 1), \dots, \Psi(S_T, T) ]$$

---

## 2. Affine Evolution & Optimization (The Soul & Will)

### 2.1 The Algebraic State (Soul)

The state $S \in Cl(\Delta)$ is defined as an equivalence class of binary quadratic forms $[a, b, c]$.

### 2.2 The Will's Loop (Search)

Implemented in `src/will/optimizer.rs`.

**Input:** Current Seed Candidate $S_{seed}$.

**Action:** The Will selects a perturbation $\epsilon \in \mathcal{P}$ (Generator Set) to navigate the Cayley Graph.

$$S_{new} = S_{seed} \circ \epsilon$$

**Evaluation:** The system momentarily "unfolds" the time dimension. Crucially, the Energy Function $E(S)$ is Context-Dependent.

$$E(S) = E_{STP}(\text{Project}(S) \mid \text{ContextConstraints})$$

**Dynamics:** The optimizer searches for a Seed $S^*$ such that its temporal unfolding yields a Zero-Energy logic path relative to the specific problem context.

---

## 3. Hyper-Tensor Topology (v-PuNN)

### 3.1 Coordinate Mapping (Dynamic Affine Projection)

**Design Decision (v2.0):** To prevent logical degeneration in short algebraic orbits and to maximize entropy while preserving local structure, we define the projection $\Psi$ as a time-dependent linear congruence.

Define a mapping $\Psi(S, t)$ from the algebraic state $S$ at depth $t$ to a logical digit $d$:

$$\Psi(S, t) = (a + t \cdot b) \pmod{P}$$

**Where:**

* $a, b$ are the coefficients of the reduced binary quadratic form of $S$.
* $t$ is the current depth/time index of the generation.
* $P$ is the projection base.

**Properties:**

* **Lipschitz Continuity:** Small changes in $S$ (via VAPO) result in bounded linear changes in $\Psi$, preserving the gradient-like landscape for the optimizer.
* **Orbit Rotation:** Even if $S_{t+1} \approx S_t$ (algebraic stagnation), the term $t \cdot b$ ensures the logical output shifts, preventing repetitive loops.

### 3.2 Orthogonal Verification

The HTP protocol requires that generated logic must be consistent. The STP engine verifies the logical validity of the materialized path.

$$E_{STP}(\text{Materialize}(S^*)) == 0$$

---

## 4. Proof of Will & Security Model

### 4.1 The Security Goal: Semantic Proof of Reasoning

We redefine "Reasoning" strictly as: The successful traversal of a Context-Specific Graph to a Context-Specific Zero-Energy State.

$$\text{Reasoning} \iff (\text{Context} \to \Delta) \land (\text{Path} \in \text{Cayley}(\Delta)) \land (E_{STP}(\text{Path} \mid \text{Context}) = 0)$$

### 4.2 Proof Bundle (The Artifact)

The output of the system is a verifiable artifact:

$$\text{ProofBundle} := \{ \mathbf{H}_{ctx}, S_{final}, \text{Trace}_{\epsilon} \}$$

* $\mathbf{H}_{ctx}$: Context Hash (Anchors the Universe $\Delta$).
* $S_{final}$: The result seed state.
* $\text{Trace}_{\epsilon}$: The sequence of perturbations applied to reach the seed.

### 4.3 Verification (Replay)

The Verifier performs the following steps:

1.  **Derive Universe:** Recompute $\Delta$ from $\mathbf{H}_{ctx}$. If $\Delta$ does not match the problem, the proof is invalid (Wrong Universe).
2.  **Replay Search:** Starting from Identity, apply the perturbations to reconstruct the Seed $S^*$.
3.  **Replay Time & Projection:** Unfold the time orbit $S^* \to (S^*)^2 \dots$ and apply the dynamic projection $\Psi(S_t, t)$.
4.  **Check Semantics:** Verify that the resulting path yields $E_{STP} == 0$ given the original Context.

### 4.4 Hardness Assumptions (The Trinity)

* **Context Hardness (Semantic Binding):** Since $\Delta$ is derived from the prompt, pre-computing generic "logic paths" is impossible. A solver must enter the specific algebraic graph defined by the question.
* **Search Hardness (Computational Effort):** Finding a seed $S^*$ in $Cl(\Delta)$ that satisfies the logical constraints is a stochastic search problem on a chaotic graph.
* **Time Hardness (Sequentiality):** Squaring is a VDF in unknown order groups, preventing parallel forgery of the timeline.

---

## 5. Conclusion

The HTP v2.0 specification defines a Doubly-Bound Proof-of-Will protocol:

* **Algebra:** Context-Dependent Unknown Order Class Groups ($Cl(\Delta_{ctx})$).
* **Search:** Local traversal on the Cayley Graph (Will).
* **Truth:** A Seed discovered by the Will that withstands the test of Time (Squaring) and Space (Dynamic Projection).
